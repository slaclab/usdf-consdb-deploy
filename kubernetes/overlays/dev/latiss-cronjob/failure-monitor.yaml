apiVersion: batch/v1
kind: CronJob
metadata:
  name: transformed-efd-dev-failure-monitor
spec:
  schedule: "0 * * * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: processor  
            env:
            - name: INSTRUMENT
              value: "LATISS"
            - name: CONFIG_FILE
              value: "/opt/lsst/software/stack/python/lsst/consdb/transformed_efd/config/config_latiss.yaml"
            - name: RESUME
              value: "--resume"     # -R or --resume Flag to resume processing from the last successful chunk
            - name: CONSDB_URL
              valueFrom:
                secretKeyRef:
                  name: efd-transform-secrets
                  key: consdb-url-dev
            - name: BUTLER_REPO
              value: "s3://embargo@rubin-summit-users/butler.yaml"
            - name: EFD_PATH
              value: "influxdb-enterprise-standby-data"  # querying the standby node to avoid overload on the primary            

