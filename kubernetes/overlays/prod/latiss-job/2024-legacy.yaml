apiVersion: batch/v1
kind: Job
metadata:
  name: transformed-efd-prod-latiss-2024
spec:
  template:
    spec:
      containers:
      - name: processor               
        env:                          
          - name: INSTRUMENT
            value: "LATISS"
          - name: CONFIG_FILE
            value: "/opt/lsst/software/stack/python/lsst/consdb/transformed_efd/config/config_latiss.yaml"
          - name: DATETIME_START
            value: "2024-01-01T00:00:00"      # ISOT format (UTC)
          - name: DATETIME_END
            value: "2025-01-01T00:00:00"      # ISOT format (UTC)
          - name: TIMEDELTA
            value: "60"            # Size of the processing chunks (in time, minutes)
          - name: TIMEWINDOW
            value: "5"            # Time overlap between a chunk and the next one (minutes)
          - name: CONSDB_URL
            valueFrom:
              secretKeyRef:
                name: efd-transform-secrets
                key: consdb-url
          - name: BUTLER_REPO
            value: "s3://embargo@rubin-summit-users/butler.yaml"
          
        resources:
          limits:
            cpu: "4"
            memory: "64Gi"
          requests:
            cpu: "2"
            memory: "32Gi"
